<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOCKUP MASTER | Digital Goods</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Plus+Jakarta+Sans:wght@800&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff; color: #000; }
        .branding { font-family: 'Plus Jakarta Sans', sans-serif; letter-spacing: -0.05em; }
        .view { display: none; } .view.active { display: block; }
        .console-input { width: 100%; border: 1px solid #eee; padding: 12px; border-radius: 10px; margin-bottom: 10px; outline: none; }
        .loader-spinner { border-top-color: #000; animation: spin 0.8s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="loader" class="fixed inset-0 bg-white z-[200] flex flex-col items-center justify-center">
        <div class="loader-spinner w-10 h-10 border-4 border-gray-100 rounded-full mb-4"></div>
        <p class="text-[10px] font-bold uppercase tracking-widest text-gray-400">Syncing with Cloud...</p>
    </div>

    <header class="sticky top-0 z-[100] bg-white/90 backdrop-blur-md border-b border-gray-50">
        <div class="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
            <div class="branding text-2xl font-black uppercase cursor-pointer" onclick="location.href=location.pathname">MOCKUP<span class="text-gray-200">MASTER</span></div>
            <nav id="nav-cats" class="hidden md:flex gap-6 text-[11px] font-bold uppercase tracking-widest text-gray-400"></nav>
            <button onclick="showPage('home')" class="text-xs font-bold uppercase tracking-widest">Shop</button>
        </div>
    </header>

    <div id="page-home" class="view active">
        <section class="max-w-7xl mx-auto px-6 py-20 border-b">
            <h1 class="branding text-7xl md:text-9xl font-black leading-none mb-6">THE<br>STUDIO.</h1>
            <p class="text-gray-400 max-w-sm font-medium">Professional assets for clothing brands.</p>
        </section>
        <main class="max-w-7xl mx-auto px-6 py-20">
            <div id="product-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12 text-center md:text-left"></div>
        </main>
    </div>

    <div id="page-detail" class="view min-h-screen p-6">
        <div class="max-w-7xl mx-auto py-12">
            <div class="grid lg:grid-cols-2 gap-16">
                <img id="det-img" class="w-full aspect-square object-cover rounded-[2rem] border shadow-sm">
                <div>
                    <h2 id="det-title" class="branding text-5xl font-black mb-4"></h2>
                    <p id="det-price" class="text-2xl text-gray-400 mb-8"></p>
                    <p id="det-desc" class="text-gray-500 mb-10 whitespace-pre-line"></p>
                    <div id="buy-btn-cont"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="page-console" class="view bg-gray-50 min-h-screen p-6">
        <div class="max-w-2xl mx-auto">
            <div id="admin-login" class="bg-white p-10 rounded-3xl shadow-xl text-center">
                <h2 class="branding text-xl mb-6">ADMIN ACCESS</h2>
                <input type="password" id="console-pass" class="console-input text-center" placeholder="Password">
                <button onclick="authAdmin()" class="w-full bg-black text-white py-4 rounded-xl font-bold">LOGIN</button>
            </div>
            
            <div id="admin-panel" class="hidden space-y-6">
                <div class="bg-white p-8 rounded-3xl border shadow-sm">
                    <h3 class="font-bold mb-6">ADD PRODUCT</h3>
                    <input id="pTitle" placeholder="Title" class="console-input">
                    <input id="pPrice" placeholder="Price (e.g. $25)" class="console-input">
                    <input id="pSlug" placeholder="Gumroad Slug" class="console-input">
                    <select id="pCat" class="console-input">
                        <option value="T-shirts">T-shirts</option>
                        <option value="Hoodies">Hoodies</option>
                        <option value="Bundles">Bundles</option>
                        <option value="Freebies">Freebies</option>
                    </select>
                    <input id="pImgs" placeholder="Image Path (assets/images/1.jpg)" class="console-input">
                    <textarea id="pDesc" placeholder="Description" class="console-input h-24"></textarea>
                    <button onclick="saveProduct()" class="w-full bg-black text-white py-4 rounded-xl font-bold">PUBLISH</button>
                </div>
                <div id="admin-list" class="space-y-2"></div>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIG ---
        const firebaseConfig = {
            apiKey: "AIzaSyDs6JHPSV8UM2uKSSVUA1SNxWGyxAihaII",
            authDomain: "mockup-master-db.firebaseapp.com",
            databaseURL: "https://mockup-master-db-default-rtdb.firebaseio.com",
            projectId: "mockup-master-db",
            storageBucket: "mockup-master-db.firebasestorage.app",
            messagingSenderId: "68063883147",
            appId: "1:68063883147:web:07debadc7efe4aeccac98e"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let products = [];
        const categories = ["T-shirts", "Hoodies", "Bundles", "Freebies"];

        // --- CORE ---
        function showPage(p) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById('page-' + p).classList.add('active');
            window.scrollTo(0,0);
        }

        function authAdmin() {
            if(document.getElementById('console-pass').value === "admin123") {
                document.getElementById('admin-login').classList.add('hidden');
                document.getElementById('admin-panel').classList.remove('hidden');
                loadAdminList();
            }
        }

        // --- DB OPERATIONS ---
        function saveProduct() {
            const id = Date.now();
            const p = {
                id: id,
                title: document.getElementById('pTitle').value,
                price: document.getElementById('pPrice').value,
                slug: document.getElementById('pSlug').value,
                cat: document.getElementById('pCat').value,
                imgs: [document.getElementById('pImgs').value],
                desc: document.getElementById('pDesc').value
            };
            db.ref('products/' + id).set(p, () => {
                alert("Live!");
                location.reload();
            });
        }

        function loadAdminList() {
            db.ref('products').on('value', snap => {
                const data = snap.val();
                const items = data ? Object.values(data) : [];
                document.getElementById('admin-list').innerHTML = items.map(p => `
                    <div class="bg-white p-4 rounded-xl flex justify-between border">
                        <span>${p.title}</span>
                        <button onclick="db.ref('products/${p.id}').remove()" class="text-red-500 font-bold">X</button>
                    </div>
                `).join('');
            });
        }

        // --- RENDER ---
        function loadStore() {
            // Emniyet Kemeri: 3 saniye sonra loader'ı her türlü kapat
            const safetyTimeout = setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
            }, 3000);

            db.ref('products').on('value', snap => {
                clearTimeout(safetyTimeout);
                const data = snap.val();
                products = data ? Object.values(data) : [];
                renderHome(products);
                document.getElementById('loader').style.display = 'none';
            });
        }

        function renderHome(items) {
            document.getElementById('nav-cats').innerHTML = categories.map(c => `<button onclick="filterCat('${c}')" class="hover:text-black">${c}</button>`).join('');
            const grid = document.getElementById('product-grid');
            grid.innerHTML = items.map(p => `
                <div class="cursor-pointer group" onclick="openProduct(${p.id})">
                    <div class="aspect-[4/5] overflow-hidden rounded-[2rem] bg-gray-50 border mb-4">
                        <img src="${p.imgs[0]}" class="w-full h-full object-cover group-hover
