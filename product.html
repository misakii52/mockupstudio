<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>PRODUCT DETAIL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://gumroad.com/js/gumroad.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
</head>
<body class="bg-white">
    <nav class="p-8"><a href="index.html" class="font-black uppercase text-xs tracking-widest">‚Üê Back to Archive</a></nav>

    <main class="max-w-[1400px] mx-auto px-8 grid lg:grid-cols-2 gap-20 py-10">
        <div id="product-gallery" class="space-y-4">
            <div class="aspect-square bg-gray-50 rounded-2xl overflow-hidden">
                <img id="main-img" class="w-full h-full object-cover">
            </div>
            <div id="thumb-grid" class="grid grid-cols-5 gap-4"></div>
        </div>

        <div class="sticky top-10 h-fit">
            <span id="p-cat" class="text-[10px] font-black text-gray-300 uppercase tracking-[0.4em] block mb-4"></span>
            <h1 id="p-title" class="text-6xl font-black italic uppercase tracking-tighter mb-6"></h1>
            <p id="p-price" class="text-3xl font-light italic mb-10"></p>
            
            <div id="p-desc" class="text-gray-500 leading-relaxed prose mb-12"></div>
            
            <div id="buy-area" class="pt-10 border-t"></div>
        </div>
    </main>

    <script src="firebase-config.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const pid = urlParams.get('id');

        db.ref('products/' + pid).on('value', snap => {
            const p = snap.val();
            if(!p) return;

            document.getElementById('p-title').innerText = p.title;
            document.getElementById('p-cat').innerText = p.category;
            document.getElementById('p-price').innerText = `$${p.price}`;
            document.getElementById('p-desc').innerHTML = p.description;
            document.getElementById('main-img').src = p.images[0];
            
            // Thumbnails
            document.getElementById('thumb-grid').innerHTML = p.images.map(img => `
                <img src="${img}" onclick="document.getElementById('main-img').src='${img}'" class="aspect-square object-cover rounded-lg cursor-pointer hover:opacity-50 transition">
            `).join('');

            // Buy Button
            document.getElementById('buy-area').innerHTML = `
                <a href="${p.gumroadUrl}" data-gumroad-overlay-checkout="true" class="block w-full bg-black text-white text-center py-6 rounded-xl font-black uppercase tracking-widest hover:opacity-80 transition">Buy on Gumroad</a>
            `;
            if (window.GumroadOverlay) window.GumroadOverlay.reload();
        });
    </script>
</body>
</html>
