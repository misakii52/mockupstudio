<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ADMIN | Mockup Master Control</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@600;800&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #f8fafc; }
        .tab-btn.active { background: #000; color: #fff; }
        .tab-content { display: none; } .tab-content.active { display: block; }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 12px; margin-bottom: 12px; }
    </style>
</head>
<body class="p-8">
    <div class="max-w-6xl mx-auto">
        <div class="flex justify-between items-center mb-10">
            <h1 class="text-3xl font-800 italic uppercase">Control <span class="text-gray-400">Panel</span></h1>
            <div class="flex bg-white p-1 rounded-xl shadow-sm border">
                <button onclick="switchTab('inventory')" class="tab-btn active px-6 py-2 rounded-lg text-xs font-bold uppercase">Inventory</button>
                <button onclick="switchTab('cats')" class="tab-btn px-6 py-2 rounded-lg text-xs font-bold uppercase">Categories</button>
                <button onclick="switchTab('ui')" class="tab-btn px-6 py-2 rounded-lg text-xs font-bold uppercase">Slider & Spotlight</button>
            </div>
        </div>

        <div id="inventory" class="tab-content active grid lg:grid-cols-3 gap-8">
            <div class="bg-white p-8 rounded-3xl border shadow-sm">
                <h2 class="font-bold mb-6 italic uppercase text-sm tracking-widest text-gray-400">Add New Product</h2>
                <input id="pTitle" placeholder="Title">
                <input id="pPrice" placeholder="Price (e.g. $29)">
                <select id="pCatList"></select>
                <input id="pSlug" placeholder="Gumroad Slug">
                <input id="pImg" placeholder="Image Path (assets/images/...)">
                <textarea id="pDesc" placeholder="Description" rows="4"></textarea>
                <label class="flex items-center gap-2 mb-4 text-xs font-bold uppercase"><input type="checkbox" id="pFeatured"> Set as New Arrival</label>
                <button onclick="saveProduct()" class="w-full bg-black text-white py-4 rounded-xl font-bold uppercase text-[10px]">Publish Asset</button>
            </div>
            <div class="lg:col-span-2 bg-white p-8 rounded-3xl border"><div id="inventory-list" class="space-y-3"></div></div>
        </div>

        <div id="cats" class="tab-content max-w-xl mx-auto">
            <div class="bg-white p-8 rounded-3xl border">
                <div class="flex gap-2 mb-6"><input id="newCatName" placeholder="New Category" class="!mb-0"><button onclick="addCategory()" class="bg-black text-white px-6 rounded-xl font-bold">Add</button></div>
                <div id="category-list" class="space-y-2"></div>
            </div>
        </div>

        <div id="ui" class="tab-content grid md:grid-cols-2 gap-8">
            <div class="bg-white p-8 rounded-3xl border">
                <h3 class="font-bold mb-4 uppercase text-xs">Hero Slider</h3>
                <input id="slideImg" placeholder="Image URL"><input id="slideLink" placeholder="Link"><button onclick="addSlide()" class="w-full border-2 border-black py-2 rounded-xl text-xs font-bold uppercase">Add Slide</button>
                <div id="slider-list" class="mt-6 space-y-2"></div>
            </div>
            <div class="bg-white p-8 rounded-3xl border">
                <h3 class="font-bold mb-4 uppercase text-xs">Weekly Spotlight</h3>
                <input id="spotTitle" placeholder="Spotlight Title"><select id="spotProduct"></select><textarea id="spotText" placeholder="Marketing text..."></textarea><button onclick="updateSpotlight()" class="w-full bg-black text-white py-4 rounded-xl text-xs font-bold uppercase">Update</button>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDs6JHPSV8UM2uKSSVUA1SNxWGyxAihaII",
            authDomain: "mockup-master-db.firebaseapp.com",
            databaseURL: "https://mockup-master-db-default-rtdb.firebaseio.com",
            projectId: "mockup-master-db",
            storageBucket: "mockup-master-db.firebasestorage.app",
            messagingSenderId: "68063883147",
            appId: "1:68063883147:web:07debadc7efe4aeccac98e"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function saveProduct() {
            const id = Date.now();
            db.ref('products/' + id).set({
                id, title: document.getElementById('pTitle').value, price: document.getElementById('pPrice').value,
                cat: document.getElementById('pCatList').value, slug: document.getElementById('pSlug').value,
                img: document.getElementById('pImg').value, desc: document.getElementById('pDesc').value,
                featured: document.getElementById('pFeatured').checked
            }, () => alert("Saved!"));
        }

        db.ref('products').on('value', snap => {
            const prods = snap.val() ? Object.values(snap.val()) : [];
            document.getElementById('inventory-list').innerHTML = prods.reverse().map(p => `<div class="flex justify-between p-3 bg-gray-50 rounded-xl border"><span>${p.title}</span><button onclick="db.ref('products/${p.id}').remove()" class="text-red-500">X</button></div>`).join('');
            document.getElementById('spotProduct').innerHTML = prods.map(p => `<option value="${p.id}">${p.title}</option>`).join('');
        });

        function addCategory() { db.ref('categories').push(document.getElementById('newCatName').value); document.getElementById('newCatName').value = ""; }
        db.ref('categories').on('value', snap => {
            const cats = snap.val() ? Object.entries(snap.val()) : [];
            document.getElementById('category-list').innerHTML = cats.map(([id, n]) => `<div class="flex justify-between p-3 bg-gray-50 rounded-xl border"><span>${n}</span><button onclick="db.ref('categories/${id}').remove()" class="text-red-500">X</button></div>`).join('');
            document.getElementById('pCatList').innerHTML = cats.map(([id, n]) => `<option value="${n}">${n}</option>`).join('');
        });

        function addSlide() { db.ref('hero_slider').push({ img: document.getElementById('slideImg').value, link: document.getElementById('slideLink').value }); }
        db.ref('hero_slider').on('value', snap => {
            const slides = snap.val() ? Object.entries(snap.val()) : [];
            document.getElementById('slider-list').innerHTML = slides.map(([id, s]) => `<div class="relative"><img src="${s.img}" class="h-20 w-full object-cover rounded-lg"><button onclick="db.ref('hero_slider/${id}').remove()" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded text-xs">Del</button></div>`).join('');
        });

        function updateSpotlight() {
            db.ref('spotlight').set({ title: document.getElementById('spotTitle').value, productId: document.getElementById('spotProduct').value, text: document.getElementById('spotText').value }, () => alert("Updated!"));
        }
    </script>
</body>
</html>
